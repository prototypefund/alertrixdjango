{% extends 'alertrix/base.html' %}

{% load i18n %}
{% load static %}
{% load matrix %}

{% block title %}
{% trans 'companies' %}
{% endblock %}

{% block content %}
<h1>{% trans 'companies' %}</h1>
<div class="main-list">
    {% for obj in object_list %}
    <a href="{% url 'comp.detail' slug=obj.slug %}" style="min-height: 128">
        <div>
        {% if obj.matrix_room_id %}
        <div style="float: left">
            <img src="{% mxc_to_http obj.handler.application_service.homeserver.url obj.get_room_avatar 128 128 %}" alt="" height="128">
        </div>
        {% endif %}
        <div>
            <div style="float: left" class="alertrix-company-title">
                {{ obj }}
            </div>
            <br>
            <div class="alertrix-company-actions">
                <a href="element://vector/webapp/#/room/{{ obj.matrix_room_id }}">[m]</a>
            </div>
        </div>
        </div>
    </a>
    {% endfor %}
    {% if perms.alertrix.add_company %}
    <a href="{% url 'comp.new' %}" style="min-height: 128">
        <div>
        <div style="float: left">
            <img src="{% static 'alertrix/icons/new.svg' %}" alt="" height="128">
        </div>
        <div>
            <div style="float: left" class="alertrix-company-title">
                {% trans 'new company' %}
            </div>
        </div>
        </div>
    </a>
    {% endif %}
</div>
{% endblock %}
